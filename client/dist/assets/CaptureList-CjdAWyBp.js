import{d as H,ae as Y,q as b,E as T,s as L,c as n,F as C,b as e,e as d,n as w,A as f,k as v,a as i,V as y,h as _,t as p,L as z,U as B,p as D,M as E,af as g,o as r,_ as I,l as A,r as S,g as F}from"./index-B6bjVD1t.js";import{V as N}from"./ssrBoot-BZgk4Ccd.js";import{V as $}from"./VAvatar-C6UrGd6-.js";import{V as U,a as R}from"./VCard-Cz-gAgLl.js";const j={class:"capture-detail-drawer__header"},q={key:1,class:"capture-detail-drawer__content"},G={class:"capture-detail-drawer__property"},J={class:"capture-detail-drawer__property-value"},K={key:0,class:"capture-detail-drawer__property"},O={class:"capture-detail-drawer__property-value"},P={key:1,class:"capture-detail-drawer__property"},Q={class:"capture-detail-drawer__property-value"},W={class:"capture-detail-drawer__property"},X={class:"capture-detail-drawer__property-value"},Z={class:"capture-detail-drawer__property"},x={class:"capture-detail-drawer__property-value-container"},ee={class:"capture-detail-drawer__property-value capture-detail-drawer__property-value--path"},te={class:"capture-detail-drawer__footer"},ae=["src"],se=H({__name:"CaptureDetailDrawer",props:{capture:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(V,{emit:m}){const u=V,k=m,a=Y(),l=b(!1),c=T({get:()=>u.modelValue,set:s=>k("update:modelValue",s)});L(c,s=>{s?document.documentElement.classList.add("v-overlay-scroll-blocked"):l.value===!1&&document.documentElement.classList.remove("v-overlay-scroll-blocked")}),L(l,s=>{s?document.documentElement.classList.add("v-overlay-scroll-blocked"):c.value===!1&&document.documentElement.classList.remove("v-overlay-scroll-blocked")});const o=()=>{c.value=!1},M=async()=>{if(u.capture)try{const s=await fetch(u.capture.url);if(!s.ok)throw new Error("Failed to fetch capture image.");const t=await s.blob();B.downloadBlobData(t,u.capture.name),E.success("キャプチャをダウンロードしました。")}catch(s){console.error("Failed to download capture:",s),E.error("キャプチャのダウンロードに失敗しました。")}};return(s,t)=>(r(),n(C,null,[e("div",{class:w(["capture-detail-drawer__scrim",{"capture-detail-drawer__scrim--visible":c.value}]),onClick:o},null,2),e("div",{class:w(["capture-detail-drawer",{"capture-detail-drawer--visible":c.value,"capture-detail-drawer--bottom-sheet":f(a).smAndDown.value}])},[e("div",j,[t[5]||(t[5]=e("div",{class:"capture-detail-drawer__title"},"キャプチャ情報",-1)),i(N),i(y,{icon:"",variant:"flat",onClick:o},{default:_(()=>[i(g,{icon:"mdi-close"})]),_:1})]),s.capture&&f(a).smAndDown.value?(r(),v($,{key:0,src:s.capture.url,"aspect-ratio":"1.7778",class:"capture-detail-drawer__image"},null,8,["src"])):d("",!0),s.capture?(r(),n("div",q,[e("div",G,[t[6]||(t[6]=e("div",{class:"capture-detail-drawer__property-label"},"ファイル名",-1)),e("div",J,p(s.capture.name),1)]),s.capture.time?(r(),n("div",K,[t[7]||(t[7]=e("div",{class:"capture-detail-drawer__property-label"},"時間",-1)),e("div",O,p(f(z)(s.capture.time).format("YYYY/MM/DD HH:mm:ss")),1)])):d("",!0),s.capture.program_title?(r(),n("div",P,[t[8]||(t[8]=e("div",{class:"capture-detail-drawer__property-label"},"番組",-1)),e("div",Q,p(s.capture.channel_name)+" - "+p(s.capture.program_title),1)])):d("",!0),e("div",W,[t[9]||(t[9]=e("div",{class:"capture-detail-drawer__property-label"},"サイズ",-1)),e("div",X,p(f(B).formatBytes(s.capture.size)),1)]),e("div",Z,[t[11]||(t[11]=e("div",{class:"capture-detail-drawer__property-label"},"パス",-1)),e("div",x,[e("div",ee,p(s.capture.path),1),f(a).smAndDown.value?(r(),v(y,{key:0,class:"capture-detail-drawer__fullscreen-button",variant:"tonal",size:"large",onClick:t[0]||(t[0]=h=>l.value=!0)},{default:_(()=>[i(g,{icon:"mdi-fullscreen",class:"mr-1",size:"large"}),t[10]||(t[10]=e("span",null,"全画面表示",-1))]),_:1})):d("",!0)])])])):d("",!0),e("div",te,[f(a).smAndDown.value?d("",!0):(r(),v(y,{key:0,class:"mb-4",block:"",size:"large",variant:"tonal",onClick:t[1]||(t[1]=h=>l.value=!0)},{default:_(()=>[i(g,{icon:"mdi-fullscreen",class:"mr-1",size:"large"}),t[12]||(t[12]=e("span",null,"全画面表示",-1))]),_:1})),i(y,{color:"secondary",block:"",size:"large",onClick:M},{default:_(()=>[i(g,{icon:"mdi-download",class:"mr-2"}),t[13]||(t[13]=e("span",null,"ダウンロード",-1))]),_:1})])],2),l.value&&s.capture?(r(),n("div",{key:0,class:"fullscreen-viewer",onClick:t[4]||(t[4]=D(h=>l.value=!1,["self"]))},[e("img",{src:s.capture.url,class:"fullscreen-viewer__image",onClick:t[2]||(t[2]=D(()=>{},["stop"]))},null,8,ae),i(y,{class:"fullscreen-viewer__close-button",icon:"mdi-close",size:"large",variant:"flat",onClick:t[3]||(t[3]=h=>l.value=!1)})])):d("",!0)],64))}}),le=I(se,[["__scopeId","data-v-d882803b"]]),re={class:"capture-list"},oe={key:0,class:"capture-list__header"},ie={class:"capture-list__title"},ne={class:"capture-list__title-text"},de={class:"capture-list__title-count"},ue={class:"capture-list__actions"},pe={class:"capture-list__empty-content"},ce=["innerHTML"],_e=["innerHTML"],me={class:"capture-list__grid-content"},ve={key:0,class:"capture-card__title-text"},fe={key:1,class:"capture-card__title-text"},ye={key:2,class:"capture-card__title-time"},we=H({__name:"CaptureList",props:{title:{},captures:{},hideHeader:{type:Boolean,default:!1},showRefreshButton:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyIcon:{default:"fluent:image-multiple-24-regular"},emptyMessage:{default:"キャプチャはまだありません。"},emptySubMessage:{default:"視聴画面からキャプチャを撮影できます。"},isLoading:{type:Boolean,default:!1}},emits:["refresh","more"],setup(V){const m=b(!1),u=b(null),k=a=>{var l;m.value&&((l=u.value)==null?void 0:l.name)===a.name?(m.value=!1,u.value=null):(u.value=a,m.value=!0)};return(a,l)=>{const c=S("Icon");return r(),n("div",re,[a.hideHeader?d("",!0):(r(),n("div",oe,[e("h2",ie,[e("span",ne,p(a.title),1),e("div",de,[a.isLoading?(r(),v(c,{key:0,icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"})):(r(),n(C,{key:1},[A(p(a.captures.length)+"件",1)],64))])]),e("div",ue,[a.showRefreshButton?(r(),v(y,{key:0,variant:"text",class:"capture-list__refresh-button mr-2",loading:a.isLoading,disabled:a.isLoading,onClick:l[0]||(l[0]=o=>a.$emit("refresh"))},{default:_(()=>[i(c,{icon:"fluent:arrow-sync-16-regular",width:"20px",height:"20px"}),l[3]||(l[3]=e("span",{class:"ml-1"},"更新",-1))]),_:1},8,["loading","disabled"])):d("",!0),a.showMoreButton?(r(),v(y,{key:1,variant:"text",class:"capture-list__more",onClick:l[1]||(l[1]=o=>a.$emit("more"))},{default:_(()=>[l[4]||(l[4]=e("span",{class:"text-primary"},"もっと見る",-1)),i(c,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1})):d("",!0)])])),e("div",{class:w(["capture-list__grid",{"capture-list__grid--loading":a.isLoading,"capture-list__grid--empty":a.captures.length===0&&a.showEmptyMessage}])},[e("div",{class:w(["capture-list__empty",{"capture-list__empty--show":a.captures.length===0&&a.showEmptyMessage&&!a.isLoading}])},[e("div",pe,[i(c,{class:"capture-list__empty-icon",icon:a.emptyIcon,width:"54px",height:"54px"},null,8,["icon"]),e("h2",{innerHTML:a.emptyMessage},null,8,ce),a.emptySubMessage?(r(),n("div",{key:0,class:"capture-list__empty-submessage",innerHTML:a.emptySubMessage},null,8,_e)):d("",!0)])],2),e("div",me,[(r(!0),n(C,null,F(a.captures,o=>(r(),v(R,{key:o.name,class:"capture-card",onClick:M=>k(o)},{default:_(()=>[i($,{src:o.url,"aspect-ratio":"1.7778",class:"align-end"},{default:_(()=>[i(U,{class:"capture-card__title"},{default:_(()=>[o.program_title?(r(),n("div",ve,p(o.program_title),1)):(r(),n("div",fe,p(o.name),1)),o.time?(r(),n("div",ye,p(f(z)(o.time).format("YYYY/MM/DD HH:mm:ss")),1)):d("",!0)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["onClick"]))),128))])],2),i(le,{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=o=>m.value=o),capture:u.value},null,8,["modelValue","capture"]),e("div",{class:w(["capture-list__image-viewer",{"capture-list__image-viewer--visible":m.value}])},[u.value?(r(),v($,{key:0,src:u.value.url,cover:"",class:"capture-list__image-viewer-image"},null,8,["src"])):d("",!0)],2)])}}}),Ce=I(we,[["__scopeId","data-v-35d56870"]]);export{Ce as C};
