import{d as y,u as v,E as o,s as l,G as f,L as w,N as S,c as B,a as i,b as d,O as b,o as q,_ as H}from"./index-DJnqFb91.js";import{B as M}from"./Breadcrumbs-DyjOTM-C.js";import{H as N,N as V}from"./Navigation-Dma7GRf8.js";import{R as E}from"./RecordedProgramList-DH3yXBlL.js";import{V as I}from"./Videos-y6WHFsfm.js";import"./ssrBoot-DvxYJLiV.js";import"./VDialog-DAC-RvNQ.js";import"./VOverlay-BcNliwIL.js";import"./forwardRefs-B931MWyl.js";import"./dialog-transition-CY4dbePS.js";import"./VCard-CCKEmTaz.js";import"./VRow-B2wsbuYS.js";import"./VSelect-BEmwMWVE.js";import"./VTextField-BzKJGGL0.js";import"./VDivider-TTn6AwhD.js";import"./VSwitch-D2sK-9NJ.js";import"./VPagination-CCBA5pXF.js";import"./VTooltip-B1ueVVMM.js";import"./manager-B_l_qcot.js";import"./PlayerUtils-BfTyTGZ4.js";const L={class:"route-container"},R={class:"watched-history-container-wrapper"},k={class:"watched-history-container"},x=y({__name:"WatchedHistory",setup(P){const s=S(),g=b(),m=v(),n=o([]),c=o(0),t=o(!0),a=o(1),p=async()=>{const e=m.settings.watched_history.sort((u,_)=>_.updated_at-u.updated_at).map(u=>u.video_id);if(e.length===0){n.value=[],c.value=0,t.value=!1;return}const r=await I.fetchVideos("ids",a.value,e);r&&(n.value=r.recorded_programs,c.value=r.total),t.value=!1},h=async e=>{a.value=e,t.value=!0,await g.replace({query:{...s.query,page:e.toString()}})};return l(()=>s.query,async e=>{e.page&&(a.value=parseInt(e.page)),await p()},{deep:!0}),l(()=>m.settings.watched_history,async()=>{await p()},{deep:!0}),f(async()=>{await w().fetchUser(),s.query.page&&(a.value=parseInt(s.query.page)),await p()}),(e,r)=>(q(),B("div",L,[i(N),d("main",null,[i(V),d("div",R,[d("div",k,[i(M,{crumbs:[{name:"ホーム",path:"/"},{name:"視聴履歴",path:"/watched-history/",disabled:!0}]}),i(E,{title:"視聴履歴",programs:n.value,total:c.value,page:a.value,hideSort:!0,isLoading:t.value,showBackButton:!0,showEmptyMessage:!t.value,emptyIcon:"fluent:history-20-regular",emptyMessage:"まだ視聴履歴がありません。",emptySubMessage:"録画番組を30秒以上みると、<br class='d-sm-none'>視聴履歴に追加されます。",forWatchedHistory:!0,"onUpdate:page":h},null,8,["programs","total","page","isLoading","showEmptyMessage"])])])])]))}}),ae=H(x,[["__scopeId","data-v-08a689a1"]]);export{ae as default};
