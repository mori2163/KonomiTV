import{E as s,cI as o,M as t}from"./index-DccM7iaM.js";class p{static async fetchCaptures(){const e=await s.get("/captures");return e.type==="success"?(e.data.forEach(r=>{r.url=`/api${r.url}`}),e.data):null}static async uploadCapture(e,r){const i=new FormData;i.append("image",e,r);const a=await s.post("/captures",i,{headers:{"Content-Type":"multipart/form-data"}});if(a.type==="error")switch(a.data.detail){case"Permission denied to save the file":{t.error("キャプチャのアップロードに失敗しました。保存先フォルダに書き込み権限がありません。");break}case"No space left on the device":{t.error("キャプチャのアップロードに失敗しました。保存先フォルダに空き容量がありません。");break}case"Unexpected error occurred while saving the file":{t.error("キャプチャのアップロードに失敗しました。保存中に予期しないエラーが発生しました。");break}default:{Number.isNaN(a.status)?(a.error.code===o.ECONNABORTED?t.warning("キャプチャのアップロード中にサーバーへの接続が切断されました。リトライします。"):a.error.code===o.ETIMEDOUT?t.warning("キャプチャのアップロード中にサーバーへの接続がタイムアウトしました。リトライします。"):a.error.code===o.ERR_NETWORK?t.warning("キャプチャのアップロード中に予期しないネットワークエラーが発生しました。リトライします。"):t.warning("キャプチャのアップロードに失敗しました。リトライします。"),await this.uploadCapture(e,r)):s.showGenericError(a,"キャプチャのアップロードに失敗しました。");break}}}static async deleteCapture(e){const r=await s.delete(`/captures/${e}`);return r.type==="error"?(s.showGenericError(r,"キャプチャの削除に失敗しました。"),!1):!0}}export{p as C};
