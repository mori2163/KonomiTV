import{a7 as t,cn as o,M as r}from"./index-DIoHDJyy.js";class p{static async fetchCaptures(){const a=await t.get("/captures");return a.type==="success"?(a.data.forEach(s=>{s.url=`/api${s.url}`}),a.data):null}static async uploadCapture(a,s){const i=new FormData;i.append("image",a,s);const e=await t.post("/captures",i,{headers:{"Content-Type":"multipart/form-data"}});if(e.type==="error")switch(e.data.detail){case"Permission denied to save the file":{r.error("キャプチャのアップロードに失敗しました。保存先フォルダに書き込み権限がありません。");break}case"No space left on the device":{r.error("キャプチャのアップロードに失敗しました。保存先フォルダに空き容量がありません。");break}case"Unexpected error occurred while saving the file":{r.error("キャプチャのアップロードに失敗しました。保存中に予期しないエラーが発生しました。");break}default:{Number.isNaN(e.status)?(e.error.code===o.ECONNABORTED?r.warning("キャプチャのアップロード中にサーバーへの接続が切断されました。リトライします。"):e.error.code===o.ETIMEDOUT?r.warning("キャプチャのアップロード中にサーバーへの接続がタイムアウトしました。リトライします。"):e.error.code===o.ERR_NETWORK?r.warning("キャプチャのアップロード中に予期しないネットワークエラーが発生しました。リトライします。"):r.warning("キャプチャのアップロードに失敗しました。リトライします。"),await this.uploadCapture(a,s)):t.showGenericError(e,"キャプチャのアップロードに失敗しました。");break}}}}export{p as C};
