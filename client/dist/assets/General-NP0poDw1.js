import{d as k,m as $,U as f,u as C,_ as T,k as V,h as d,a as n,b as t,w as y,r as p,c as g,e as h,l as i,t as b,o as r,R as S,M as _,a2 as M,V as u}from"./index-DJnqFb91.js";import{d as P}from"./vuedraggable.umd-D8tYCO_0.js";import{u as D}from"./ChannelsStore-Dfb6wZak.js";import{a as I,V as Z}from"./VCard-CCKEmTaz.js";import{V as A}from"./ssrBoot-DvxYJLiV.js";import{V as H}from"./VDialog-DAC-RvNQ.js";import{S as N}from"./Base-BsuXKL1C.js";import{V as m}from"./VSwitch-D2sK-9NJ.js";import{V as w}from"./VDivider-TTn6AwhD.js";import{V as c}from"./VSelect-BEmwMWVE.js";import{V as z}from"./VFileInput-BiUt0_Hl.js";import"./VOverlay-BcNliwIL.js";import"./forwardRefs-B931MWyl.js";import"./dialog-transition-CY4dbePS.js";import"./Navigation-Dma7GRf8.js";import"./VTextField-BzKJGGL0.js";const K=k({name:"PinnedChannelSettings",components:{draggable:P},props:{modelValue:{type:Boolean,required:!0}},emits:{"update:modelValue":s=>!0},data(){return{Utils:Object.freeze(f),pinned_channel_settings_modal:!1,pinned_channels:[]}},computed:{...$(D,C)},watch:{modelValue(){this.pinned_channel_settings_modal=this.modelValue},pinned_channel_settings_modal(){this.$emit("update:modelValue",this.pinned_channel_settings_modal)},pinned_channels(){this.settingsStore.settings.pinned_channel_ids=this.pinned_channels.map(s=>s.id)}},async created(){await this.channelsStore.update(),this.pinned_channels=this.channelsStore.channels_list_with_pinned.get("ピン留め")??[]}}),R={class:"px-5 pb-6"},E={key:0,class:"pinned-channels-settings__label"},F={key:1,class:"pinned-channels-settings__label"},G={class:"mt-1"},L={class:"pinned-channel"},J=["src"],Q={class:"pinned-channel__name"},W=["onClick"];function X(s,e,U,q,B,O){const a=p("Icon"),v=p("draggable");return r(),V(H,{"max-width":"550",transition:"slide-y-transition",modelValue:s.pinned_channel_settings_modal,"onUpdate:modelValue":e[2]||(e[2]=o=>s.pinned_channel_settings_modal=o)},{default:d(()=>[n(Z,{class:"pinned-channels-settings"},{default:d(()=>[n(I,{class:"px-5 pt-6 pb-3 d-flex align-center font-weight-bold",style:{height:"60px"}},{default:d(()=>[n(a,{icon:"iconamoon:sorting-left-bold",height:"26px"}),e[3]||(e[3]=t("span",{class:"ml-3"},"ピン留め中チャンネルの並び替え",-1)),n(A),y((r(),g("div",{class:"d-flex align-center rounded-circle cursor-pointer px-2 py-2",onClick:e[0]||(e[0]=o=>s.pinned_channel_settings_modal=!1)},[n(a,{icon:"fluent:dismiss-12-filled",width:"23px",height:"23px"})])),[[S]])]),_:1}),t("div",R,[(s.channelsStore.channels_list_with_pinned.get("ピン留め")??[]).length>0?(r(),g("div",E,[...e[4]||(e[4]=[t("div",null,"各チャンネルのつまみをドラッグして並べ替えできます。",-1)])])):h("",!0),(s.channelsStore.channels_list_with_pinned.get("ピン留め")??[]).length===0?(r(),g("div",F,[e[7]||(e[7]=t("div",null,[t("b",null,"ピン留めされているチャンネルがありません。")],-1)),t("div",G,[e[5]||(e[5]=i("TV ホーム画面のチャンネルリストの ",-1)),n(a,{style:{position:"relative",bottom:"-5px"},icon:"fluent:pin-20-filled",width:"18.5px"}),e[6]||(e[6]=i(" アイコンから、よくみるチャンネルをピン留めできます。",-1))])])):h("",!0),s.pinned_channels.length>0?(r(),V(v,{key:2,class:"pinned-channels",handle:".pinned-channel__sort-handle","item-key":"id",modelValue:s.pinned_channels,"onUpdate:modelValue":e[1]||(e[1]=o=>s.pinned_channels=o)},{item:d(({element:o})=>[t("div",L,[t("img",{class:"pinned-channel__icon",loading:"lazy",decoding:"async",src:`${s.Utils.api_base_url}/channels/${o.id}/logo`},null,8,J),t("span",Q,"Ch: "+b(o.channel_number)+" "+b(o.name),1),e[9]||(e[9]=t("button",{class:"pinned-channel__sort-handle"},[t("svg",{class:"iconify iconify--material-symbols",width:"20px",height:"20px",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M5 15q-.425 0-.713-.288T4 14q0-.425.288-.713T5 13h14q.425 0 .713.288T20 14q0 .425-.288.713T19 15H5Zm0-4q-.425 0-.713-.288T4 10q0-.425.288-.713T5 9h14q.425 0 .713.288T20 10q0 .425-.288.713T19 11H5Z"})])],-1)),y((r(),g("button",{class:"pinned-channel__delete-button",onClick:l=>s.pinned_channels=s.pinned_channels.filter(j=>j.id!==o.id)},[...e[8]||(e[8]=[t("svg",{class:"iconify iconify--fluent",width:"20px",height:"20px",viewBox:"0 0 16 16"},[t("path",{fill:"currentColor",d:"M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.564l-1.205 8.838A2.5 2.5 0 0 1 9.754 15H6.246a2.5 2.5 0 0 1-2.477-2.162L2.564 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"})],-1)])],8,W)),[[S]])])]),_:1},8,["modelValue"])):h("",!0)])]),_:1})]),_:1},8,["modelValue"])}const Y=T(K,[["render",X],["__scopeId","data-v-ac51eaa2"]]),x=k({name:"Settings-General",components:{PinnedChannelSettings:Y,SettingsBase:N},data(){return{Utils:Object.freeze(f),is_form_dense:f.isSmartphoneHorizontal(),pinned_channel_settings_modal:!1,is_offline_mode:!1,panel_display_state:[{title:"前回の状態を復元する",value:"RestorePreviousState"},{title:"常に表示する",value:"AlwaysDisplay"},{title:"常に折りたたむ",value:"AlwaysFold"}],tv_panel_active_tab:[{title:"番組情報タブ",value:"Program"},{title:"チャンネルタブ",value:"Channel"},{title:"コメントタブ",value:"Comment"},{title:"Twitter タブ",value:"Twitter"}],video_panel_active_tab:[{title:"番組情報タブ",value:"RecordedProgram"},{title:"シリーズタブ",value:"Series"},{title:"コメントタブ",value:"Comment"},{title:"Twitter タブ",value:"Twitter"}],import_settings_file:null}},computed:{...$(C,M)},mounted(){this.is_offline_mode=this.offlineStore.is_offline_mode},methods:{handleOfflineModeChange(s){const e=s??!1;this.offlineStore.setOfflineMode(e),e&&this.$router.push("/offline")},exportSettings(){const s=JSON.stringify(this.settingsStore.settings,null,4),e=new Blob([s],{type:"application/json"});f.downloadBlobData(e,"KonomiTV-Settings.json"),_.success("設定をエクスポートしました。")},async importSettings(){if(this.import_settings_file===null){_.error("インポートする設定データを選択してください！");return}await this.settingsStore.importClientSettings(this.import_settings_file)===!0?(_.success("設定をインポートしました。"),window.setTimeout(()=>this.$router.go(0),500)):_.error("設定データが不正なため、インポートできませんでした。")},async resetSettings(){await this.settingsStore.resetClientSettings(),_.success("設定をリセットしました。"),window.setTimeout(()=>this.$router.go(0),500)}}}),ee={class:"settings__heading"},te={class:"settings__content"},se={class:"settings__item settings__item--switch"},ne={class:"settings__item settings__item--switch"},ie={class:"settings__item settings__item--switch"},le={class:"settings__item settings__item--switch"},oe={class:"settings__item-heading",for:"tv_channel_selection_requires_alt_key"},ae={class:"settings__item-label",for:"tv_channel_selection_requires_alt_key"},de={class:"settings__item settings__item--switch"},re={class:"settings__item"},_e={class:"settings__item"},me={class:"settings__item"},ge={class:"settings__item"};function pe(s,e,U,q,B,O){const a=p("Icon"),v=p("PinnedChannelSettings"),o=p("SettingsBase");return r(),V(o,null,{default:d(()=>[t("h2",ee,[y((r(),g("a",{class:"settings__back-button",onClick:e[0]||(e[0]=l=>s.$router.back())},[n(a,{icon:"fluent:chevron-left-12-filled",width:"27px"})])),[[S]]),n(a,{icon:"fa-solid:sliders-h",width:"19px",style:{margin:"0 4px"}}),e[15]||(e[15]=t("span",{class:"ml-3"},"全般",-1))]),t("div",te,[e[39]||(e[39]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"ピン留め中チャンネルの並び替え"),t("div",{class:"settings__item-label"},[i(" ピン留め中のチャンネルの表示順序を変更できます。よくみるチャンネルは先頭に配置しておくと便利です。"),t("br"),i(" ピン留め中のチャンネルの追加・削除は、別途 TV ホーム画面のチャンネルリストから行えます。"),t("br")])],-1)),n(u,{class:"settings__save-button mt-4",variant:"flat",onClick:e[1]||(e[1]=l=>s.pinned_channel_settings_modal=!s.pinned_channel_settings_modal)},{default:d(()=>[n(a,{icon:"iconamoon:sorting-left-bold",height:"19px"}),e[16]||(e[16]=t("span",{class:"ml-1"},"ピン留め中チャンネルの並び替え設定を開く",-1))]),_:1}),t("div",se,[e[17]||(e[17]=t("label",{class:"settings__item-heading",for:"show_player_background_image"},"プレイヤーの読み込み中に背景写真を表示する",-1)),e[18]||(e[18]=t("label",{class:"settings__item-label",for:"show_player_background_image"},[i(" プレイヤーの読み込み中にランダムで背景写真を表示できます。デフォルトはオンです。"),t("br"),i(" 背景写真を表示したくない場合は、この設定をオフにできます。"),t("br")],-1)),n(m,{class:"settings__item-switch",color:"primary",id:"show_player_background_image","hide-details":"",modelValue:s.settingsStore.settings.show_player_background_image,"onUpdate:modelValue":e[2]||(e[2]=l=>s.settingsStore.settings.show_player_background_image=l)},null,8,["modelValue"])]),t("div",ne,[e[19]||(e[19]=t("label",{class:"settings__item-heading",for:"offline_mode"},"オフラインモードを有効にする",-1)),e[20]||(e[20]=t("label",{class:"settings__item-label",for:"offline_mode"},[i(" オフラインモードを有効にすると、オフライン視聴ページ以外のすべてのページが非表示になります。デフォルトはオフです。"),t("br"),i(" ダウンロード済みの録画番組のみを視聴したい場合に、この設定をオンにできます。"),t("br"),i(" オンにすると、自動的にオフライン視聴ページに移動します。"),t("br")],-1)),n(m,{class:"settings__item-switch",color:"primary",id:"offline_mode","hide-details":"",modelValue:s.is_offline_mode,"onUpdate:modelValue":[e[3]||(e[3]=l=>s.is_offline_mode=l),s.handleOfflineModeChange]},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ie,[e[21]||(e[21]=t("label",{class:"settings__item-heading",for:"use_pure_black_player_background"},"プレイヤー表示領域の背景色を完全な黒にする",-1)),e[22]||(e[22]=t("label",{class:"settings__item-label",for:"use_pure_black_player_background"},[i(" 映像の上下 or 左右に表示される黒帯の色を、完全な黒に変更できます。デフォルトはオフです。"),t("br"),i(" 特に有機 EL ディスプレイを搭載したデバイスで、映像の周囲に灰色がかった光が漏れて気になるときは、この設定をオンにすると改善されるかもしれません。"),t("br")],-1)),n(m,{class:"settings__item-switch",color:"primary",id:"use_pure_black_player_background","hide-details":"",modelValue:s.settingsStore.settings.use_pure_black_player_background,"onUpdate:modelValue":e[4]||(e[4]=l=>s.settingsStore.settings.use_pure_black_player_background=l)},null,8,["modelValue"])]),t("div",le,[t("label",oe,"チャンネル選局のキーボードショートカットを "+b(s.Utils.AltOrOption())+" + 数字キー/テンキーに変更する",1),t("label",ae,[i(" この設定をオンにすると、数字キーまたはテンキーに対応するリモコン番号（1～12）のチャンネルに切り替えるとき、"+b(s.Utils.AltOrOption())+" キーを同時に押す必要があります。",1),e[23]||(e[23]=t("br",null,null,-1)),e[24]||(e[24]=i(" コメントやツイートを入力しようとして誤って数字キーを押してしまい、チャンネルが変わってしまう事態を避けたい方におすすめです。",-1)),e[25]||(e[25]=t("br",null,null,-1))]),n(m,{class:"settings__item-switch",color:"primary",id:"tv_channel_selection_requires_alt_key","hide-details":"",modelValue:s.settingsStore.settings.tv_channel_selection_requires_alt_key,"onUpdate:modelValue":e[5]||(e[5]=l=>s.settingsStore.settings.tv_channel_selection_requires_alt_key=l)},null,8,["modelValue"])]),t("div",de,[e[26]||(e[26]=t("label",{class:"settings__item-heading",for:"use_28hour_clock"},"時刻を 28 時間表記で表示する",-1)),e[27]||(e[27]=t("label",{class:"settings__item-label",for:"use_28hour_clock"},[i(" 深夜番組でよく使われる 28 時間表記 (24 時 〜 27 時) で時刻を表示します。デフォルトはオフです。"),t("br"),i(" オンにすると、午前 0 時 〜 3 時が前日の 24 時 〜 27 時と表示され、深夜番組の放送時間がよりわかりやすくなります。"),t("br")],-1)),n(m,{class:"settings__item-switch",color:"primary",id:"use_28hour_clock","hide-details":"",modelValue:s.settingsStore.settings.use_28hour_clock,"onUpdate:modelValue":e[6]||(e[6]=l=>s.settingsStore.settings.use_28hour_clock=l)},null,8,["modelValue"])]),n(w,{class:"mt-6"}),t("div",re,[e[28]||(e[28]=t("div",{class:"settings__item-heading"},"デフォルトのパネルの表示状態",-1)),e[29]||(e[29]=t("div",{class:"settings__item-label"},[i(" 視聴画面を開いたときに、右側のパネルをどう表示するかを設定します。"),t("br")],-1)),n(c,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.panel_display_state,modelValue:s.settingsStore.settings.panel_display_state,"onUpdate:modelValue":e[7]||(e[7]=l=>s.settingsStore.settings.panel_display_state=l)},null,8,["density","items","modelValue"])]),t("div",_e,[e[30]||(e[30]=t("div",{class:"settings__item-heading"},"テレビをみるときにデフォルトで表示されるパネルのタブ",-1)),e[31]||(e[31]=t("div",{class:"settings__item-label"},[i(" テレビの視聴画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),t("br")],-1)),n(c,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.tv_panel_active_tab,modelValue:s.settingsStore.settings.tv_panel_active_tab,"onUpdate:modelValue":e[8]||(e[8]=l=>s.settingsStore.settings.tv_panel_active_tab=l)},null,8,["density","items","modelValue"])]),t("div",me,[e[32]||(e[32]=t("div",{class:"settings__item-heading"},"ビデオをみるときにデフォルトで表示されるパネルのタブ",-1)),e[33]||(e[33]=t("div",{class:"settings__item-label"},[i(" ビデオの視聴画面を開いたときに、右側のパネルで最初に表示されるタブを設定します。"),t("br")],-1)),n(c,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",density:s.is_form_dense?"compact":"default",items:s.video_panel_active_tab,modelValue:s.settingsStore.settings.video_panel_active_tab,"onUpdate:modelValue":e[9]||(e[9]=l=>s.settingsStore.settings.video_panel_active_tab=l)},null,8,["density","items","modelValue"])]),n(w,{class:"mt-6"}),e[40]||(e[40]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading"},"設定をエクスポート"),t("div",{class:"settings__item-label"},[i(" このデバイス (ブラウザ) に保存されている設定データを、エクスポート (ダウンロード) できます。"),t("br"),i(" ダウンロードした設定データ (KonomiTV-Settings.json) は、[設定をインポート] からインポートできます。異なるサーバーの KonomiTV を同じ設定で使いたいときなどに使ってください。"),t("br")])],-1)),n(u,{class:"settings__save-button mt-4",variant:"flat",onClick:e[10]||(e[10]=l=>s.exportSettings())},{default:d(()=>[n(a,{icon:"fa6-solid:download",class:"mr-3",height:"19px"}),e[34]||(e[34]=i("設定をエクスポート ",-1))]),_:1}),t("div",ge,[e[35]||(e[35]=t("div",{class:"settings__item-heading text-error-lighten-1"},"設定をインポート",-1)),e[36]||(e[36]=t("div",{class:"settings__item-label"},[i(" [設定をエクスポート] でダウンロードした設定データを、このデバイス (ブラウザ) にインポートできます。"),t("br"),t("strong",{class:"text-error-lighten-1"},"設定をインポートすると、現在のデバイス設定はすべて上書きされます。元に戻すことはできません。"),t("br"),t("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),i("十分ご注意ください。"),t("br")],-1)),n(z,{class:"settings__item-form",color:"primary",variant:"outlined","hide-details":"",label:"設定データ (KonomiTV-Settings.json) を選択",density:s.is_form_dense?"compact":"default",accept:"application/json","prepend-icon":"","prepend-inner-icon":"mdi-paperclip",modelValue:s.import_settings_file,"onUpdate:modelValue":e[11]||(e[11]=l=>s.import_settings_file=l)},null,8,["density","modelValue"])]),n(u,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:e[12]||(e[12]=l=>s.importSettings())},{default:d(()=>[n(a,{icon:"fa6-solid:upload",class:"mr-3",height:"19px"}),e[37]||(e[37]=i("設定をインポート ",-1))]),_:1}),e[41]||(e[41]=t("div",{class:"settings__item"},[t("div",{class:"settings__item-heading text-error-lighten-1"},"設定を初期状態にリセット"),t("div",{class:"settings__item-label"},[i(" このデバイス (ブラウザ) に保存されている設定データを、初期状態のデフォルト値にリセットできます。"),t("br"),t("strong",{class:"text-error-lighten-1"},"設定をリセットすると、元に戻すことはできません。"),t("br"),t("strong",{class:"text-error-lighten-1"},"設定のデバイス間同期がオンのときは、同期が有効なすべてのデバイスに反映されます。"),i("十分ご注意ください。"),t("br")])],-1)),n(u,{class:"settings__save-button bg-error mt-5",variant:"flat",onClick:e[13]||(e[13]=l=>s.resetSettings())},{default:d(()=>[n(a,{icon:"material-symbols:device-reset-rounded",class:"mr-2",height:"23px"}),e[38]||(e[38]=i("設定をリセット ",-1))]),_:1})]),n(v,{modelValue:s.pinned_channel_settings_modal,"onUpdate:modelValue":e[14]||(e[14]=l=>s.pinned_channel_settings_modal=l)},null,8,["modelValue"])]),_:1})}const Be=T(x,[["render",pe]]);export{Be as default};
