import{d as q,u as w,q as c,s as v,x as B,z as M,c as b,a as l,b as _,B as S,o as R,_ as V}from"./index-B6bjVD1t.js";import{B as x}from"./Breadcrumbs-C87FYtvu.js";import{H as I,N}from"./Navigation-D61QK2hj.js";import{R as O}from"./RecordedProgramList-Blat7fkq.js";import{V as P}from"./Videos-SzePgzp9.js";import"./ssrBoot-BZgk4Ccd.js";import"./VDialog-CVz8oEUI.js";import"./VChip-DdTCcy7Y.js";import"./VTextField-DMp4VoEw.js";import"./transition-CuFyqLlR.js";import"./VAvatar-C6UrGd6-.js";import"./VCard-Cz-gAgLl.js";import"./VSelect-ceFSAXCM.js";import"./VDivider-WboDZcn2.js";import"./VSelectionControl-DLq8akgm.js";import"./VPagination-BCPbpHx5.js";const k={class:"route-container"},E={class:"mylist-container-wrapper"},L={class:"mylist-container"},H=q({__name:"Mylist",setup(U){const t=M(),g=S(),y=w(),n=c([]),u=c(0),s=c(!0),o=c(1),a=c("mylist_added_desc"),p=async()=>{const e=y.settings.mylist.filter(r=>r.type==="RecordedProgram").sort((r,m)=>{switch(a.value){case"mylist_added_desc":return m.created_at-r.created_at;case"mylist_added_asc":return r.created_at-m.created_at;case"recorded_desc":case"recorded_asc":return m.created_at-r.created_at;default:return 0}}).map(r=>r.id);if(e.length===0){n.value=[],u.value=0,s.value=!1;return}let d="ids";a.value==="recorded_desc"?d="desc":a.value==="recorded_asc"&&(d="asc");const i=await P.fetchVideos(d,o.value,e);i&&(n.value=i.recorded_programs,u.value=i.total),s.value=!1},f=async e=>{o.value=e,s.value=!0,await g.replace({query:{...t.query,page:e.toString()}})},h=async e=>{a.value=e,o.value=1,s.value=!0,await g.replace({query:{...t.query,order:e,page:"1"}})};return v(()=>t.query,async e=>{e.page&&(o.value=parseInt(e.page)),e.order&&(a.value=e.order),await p()},{deep:!0}),v(()=>y.settings.mylist,async()=>{await p()},{deep:!0}),B(async()=>{t.query.page&&(o.value=parseInt(t.query.page)),t.query.order&&(a.value=t.query.order),await p()}),(e,d)=>(R(),b("div",k,[l(I),_("main",null,[l(N),_("div",E,[_("div",L,[l(x,{crumbs:[{name:"ホーム",path:"/"},{name:"マイリスト",path:"/mylist/",disabled:!0}]}),l(O,{title:"マイリスト",programs:n.value,total:u.value,page:o.value,sortOrder:a.value,isLoading:s.value,showBackButton:!0,showEmptyMessage:!s.value,emptyIcon:"ic:round-playlist-play",emptyMessage:"あとで見たい番組を<br class='d-sm-none'>マイリストに保存できます。",emptySubMessage:"録画番組の右上にある ＋ ボタンから、<br class='d-sm-none'>番組をマイリストに追加できます。",forMylist:!0,"onUpdate:page":f,"onUpdate:sortOrder":d[0]||(d[0]=i=>h(i))},null,8,["programs","total","page","sortOrder","isLoading","showEmptyMessage"])])])])]))}}),ee=V(H,[["__scopeId","data-v-ed4e128b"]]);export{ee as default};
