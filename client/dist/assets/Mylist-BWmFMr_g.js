import{d as w,u as q,E as d,s as v,G as S,L as B,N as M,c as b,a as u,b as _,O as N,o as O,_ as R}from"./index-CQ2c3tog.js";import{B as V}from"./Breadcrumbs-Dhj3FiwA.js";import{H as E,N as I}from"./Navigation-Ctrd38eO.js";import{R as L}from"./RecordedProgramList-DGl1vNte.js";import{V as P}from"./Videos-NcDZ8iOa.js";import"./ssrBoot-B7k1dIYN.js";import"./VDialog-v4AtlV_q.js";import"./VOverlay-BMoQDq53.js";import"./forwardRefs-B931MWyl.js";import"./dialog-transition-BbfO3JpI.js";import"./VCard-dYI7Rebj.js";import"./VRow-DLXADF5R.js";import"./VSelect-BX1mUtDD.js";import"./VTextField-ucY3hxT6.js";import"./VDivider-B0OsrUyy.js";import"./VSelectionControl-DxIWTB5L.js";import"./VPagination-z0yySnuW.js";import"./VTooltip-DxuOaqiO.js";const U={class:"route-container"},k={class:"mylist-container-wrapper"},x={class:"mylist-container"},H=w({__name:"Mylist",setup(C){const t=M(),g=N(),y=q(),n=d([]),l=d(0),s=d(!0),o=d(1),a=d("mylist_added_desc"),p=async()=>{const e=y.settings.mylist.filter(r=>r.type==="RecordedProgram").sort((r,m)=>{switch(a.value){case"mylist_added_desc":return m.created_at-r.created_at;case"mylist_added_asc":return r.created_at-m.created_at;case"recorded_desc":case"recorded_asc":return m.created_at-r.created_at;default:return 0}}).map(r=>r.id);if(e.length===0){n.value=[],l.value=0,s.value=!1;return}let i="ids";a.value==="recorded_desc"?i="desc":a.value==="recorded_asc"&&(i="asc");const c=await P.fetchVideos(i,o.value,e);c&&(n.value=c.recorded_programs,l.value=c.total),s.value=!1},f=async e=>{o.value=e,s.value=!0,await g.replace({query:{...t.query,page:e.toString()}})},h=async e=>{a.value=e,o.value=1,s.value=!0,await g.replace({query:{...t.query,order:e,page:"1"}})};return v(()=>t.query,async e=>{e.page&&(o.value=parseInt(e.page)),e.order&&(a.value=e.order),await p()},{deep:!0}),v(()=>y.settings.mylist,async()=>{await p()},{deep:!0}),S(async()=>{await B().fetchUser(),t.query.page&&(o.value=parseInt(t.query.page)),t.query.order&&(a.value=t.query.order),await p()}),(e,i)=>(O(),b("div",U,[u(E),_("main",null,[u(I),_("div",k,[_("div",x,[u(V,{crumbs:[{name:"ホーム",path:"/"},{name:"マイリスト",path:"/mylist/",disabled:!0}]}),u(L,{title:"マイリスト",programs:n.value,total:l.value,page:o.value,sortOrder:a.value,isLoading:s.value,showBackButton:!0,showEmptyMessage:!s.value,emptyIcon:"ic:round-playlist-play",emptyMessage:"あとで見たい番組を<br class='d-sm-none'>マイリストに保存できます。",emptySubMessage:"録画番組の右上にある ＋ ボタンから、<br class='d-sm-none'>番組をマイリストに追加できます。",forMylist:!0,"onUpdate:page":f,"onUpdate:sortOrder":i[0]||(i[0]=c=>h(c))},null,8,["programs","total","page","sortOrder","isLoading","showEmptyMessage"])])])])]))}}),re=R(H,[["__scopeId","data-v-404072fb"]]);export{re as default};
