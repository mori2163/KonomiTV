import{d as $,E as H,s as I,c as o,F as f,b as t,n as v,e as p,a as d,V as y,h as c,t as n,A as g,L as B,U as b,M as C,r as L,o as r,_ as D,q as V,k as m,l as E,g as Y}from"./index-D826gnrH.js";import{V as T}from"./ssrBoot-HaBCASlw.js";import{V as M}from"./VAvatar-DWFJXznh.js";import{V as S,a as F}from"./VCard-rmEjHgTb.js";const N={class:"capture-detail-drawer__header"},z={key:0,class:"capture-detail-drawer__content"},U={class:"capture-detail-drawer__property"},R={class:"capture-detail-drawer__property-value"},j={key:0,class:"capture-detail-drawer__property"},q={class:"capture-detail-drawer__property-value"},A={key:1,class:"capture-detail-drawer__property"},G={class:"capture-detail-drawer__property-value"},J={class:"capture-detail-drawer__property"},K={class:"capture-detail-drawer__property-value"},O={class:"capture-detail-drawer__property"},P={class:"capture-detail-drawer__property-value capture-detail-drawer__property-value--path"},Q={class:"capture-detail-drawer__footer"},W=$({__name:"CaptureDetailDrawer",props:{capture:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(h,{emit:u}){const i=h,w=u,a=H({get:()=>i.modelValue,set:e=>w("update:modelValue",e)});I(a,e=>{e?document.documentElement.classList.add("v-overlay-scroll-blocked"):document.documentElement.classList.remove("v-overlay-scroll-blocked")});const l=()=>{a.value=!1},_=async()=>{if(i.capture)try{const e=await fetch(i.capture.url);if(!e.ok)throw new Error("Failed to fetch capture image.");const s=await e.blob();b.downloadBlobData(s,i.capture.name),C.success("キャプチャをダウンロードしました。")}catch(e){console.error("Failed to download capture:",e),C.error("キャプチャのダウンロードに失敗しました。")}};return(e,s)=>{const k=L("Icon");return r(),o(f,null,[t("div",{class:v(["capture-detail-drawer__scrim",{"capture-detail-drawer__scrim--visible":a.value}]),onClick:l},null,2),t("div",{class:v(["capture-detail-drawer",{"capture-detail-drawer--visible":a.value}])},[t("div",N,[s[0]||(s[0]=t("div",{class:"capture-detail-drawer__title"},"キャプチャ情報",-1)),d(T),d(y,{icon:"",variant:"flat",onClick:l},{default:c(()=>[d(k,{icon:"fluent:dismiss-16-filled"})]),_:1})]),e.capture?(r(),o("div",z,[t("div",U,[s[1]||(s[1]=t("div",{class:"capture-detail-drawer__property-label"},"ファイル名",-1)),t("div",R,n(e.capture.name),1)]),e.capture.time?(r(),o("div",j,[s[2]||(s[2]=t("div",{class:"capture-detail-drawer__property-label"},"時間",-1)),t("div",q,n(g(B)(e.capture.time).format("YYYY/MM/DD HH:mm:ss")),1)])):p("",!0),e.capture.program_title?(r(),o("div",A,[s[3]||(s[3]=t("div",{class:"capture-detail-drawer__property-label"},"番組",-1)),t("div",G,n(e.capture.channel_name)+" - "+n(e.capture.program_title),1)])):p("",!0),t("div",J,[s[4]||(s[4]=t("div",{class:"capture-detail-drawer__property-label"},"サイズ",-1)),t("div",K,n(g(b).formatBytes(e.capture.size)),1)]),t("div",O,[s[5]||(s[5]=t("div",{class:"capture-detail-drawer__property-label"},"パス",-1)),t("div",P,n(e.capture.path),1)])])):p("",!0),t("div",Q,[d(y,{color:"secondary",block:"",size:"large",onClick:_},{default:c(()=>[d(k,{icon:"fluent:download-16-regular",class:"mr-2"}),s[6]||(s[6]=t("span",null,"ダウンロード",-1))]),_:1})])],2)],64)}}}),X=D(W,[["__scopeId","data-v-7ccb2185"]]),Z={class:"capture-list"},x={key:0,class:"capture-list__header"},ee={class:"capture-list__title"},te={class:"capture-list__title-text"},ae={class:"capture-list__title-count"},se={class:"capture-list__actions"},re={class:"capture-list__empty-content"},le=["innerHTML"],oe=["innerHTML"],ie={class:"capture-list__grid-content"},de={key:0,class:"capture-card__title-text"},ne={key:1,class:"capture-card__title-text"},pe={key:2,class:"capture-card__title-time"},ue=$({__name:"CaptureList",props:{title:{},captures:{},hideHeader:{type:Boolean,default:!1},showRefreshButton:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},showEmptyMessage:{type:Boolean,default:!0},emptyIcon:{default:"fluent:image-multiple-24-regular"},emptyMessage:{default:"キャプチャはまだありません。"},emptySubMessage:{default:"視聴画面からキャプチャを撮影できます。"},isLoading:{type:Boolean,default:!1}},emits:["refresh","more"],setup(h){const u=V(!1),i=V(null),w=a=>{var l;u.value&&((l=i.value)==null?void 0:l.name)===a.name?(u.value=!1,i.value=null):(i.value=a,u.value=!0)};return(a,l)=>{const _=L("Icon");return r(),o("div",Z,[a.hideHeader?p("",!0):(r(),o("div",x,[t("h2",ee,[t("span",te,n(a.title),1),t("div",ae,[a.isLoading?(r(),m(_,{key:0,icon:"line-md:loading-twotone-loop",class:"mr-1 spin",width:"20px",height:"20px"})):(r(),o(f,{key:1},[E(n(a.captures.length)+"件",1)],64))])]),t("div",se,[a.showRefreshButton?(r(),m(y,{key:0,variant:"text",class:"capture-list__refresh-button mr-2",loading:a.isLoading,disabled:a.isLoading,onClick:l[0]||(l[0]=e=>a.$emit("refresh"))},{default:c(()=>[d(_,{icon:"fluent:arrow-sync-16-regular",width:"20px",height:"20px"}),l[3]||(l[3]=t("span",{class:"ml-1"},"更新",-1))]),_:1},8,["loading","disabled"])):p("",!0),a.showMoreButton?(r(),m(y,{key:1,variant:"text",class:"capture-list__more",onClick:l[1]||(l[1]=e=>a.$emit("more"))},{default:c(()=>[l[4]||(l[4]=t("span",{class:"text-primary"},"もっと見る",-1)),d(_,{icon:"fluent:chevron-right-12-regular",width:"18px",class:"ml-1 text-text-darken-1",style:{margin:"0px -4px"}})]),_:1})):p("",!0)])])),t("div",{class:v(["capture-list__grid",{"capture-list__grid--loading":a.isLoading,"capture-list__grid--empty":a.captures.length===0&&a.showEmptyMessage}])},[t("div",{class:v(["capture-list__empty",{"capture-list__empty--show":a.captures.length===0&&a.showEmptyMessage&&!a.isLoading}])},[t("div",re,[d(_,{class:"capture-list__empty-icon",icon:a.emptyIcon,width:"54px",height:"54px"},null,8,["icon"]),t("h2",{innerHTML:a.emptyMessage},null,8,le),a.emptySubMessage?(r(),o("div",{key:0,class:"capture-list__empty-submessage",innerHTML:a.emptySubMessage},null,8,oe)):p("",!0)])],2),t("div",ie,[(r(!0),o(f,null,Y(a.captures,e=>(r(),m(F,{key:e.name,class:"capture-card",onClick:s=>w(e)},{default:c(()=>[d(M,{src:e.url,"aspect-ratio":"1.7778",class:"align-end"},{default:c(()=>[d(S,{class:"capture-card__title"},{default:c(()=>[e.program_title?(r(),o("div",de,n(e.program_title),1)):(r(),o("div",ne,n(e.name),1)),e.time?(r(),o("div",pe,n(g(B)(e.time).format("YYYY/MM/DD HH:mm:ss")),1)):p("",!0)]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["onClick"]))),128))])],2),d(X,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),capture:i.value},null,8,["modelValue","capture"]),t("div",{class:v(["capture-list__image-viewer",{"capture-list__image-viewer--visible":u.value}])},[i.value?(r(),m(M,{key:0,src:i.value.url,cover:"",class:"capture-list__image-viewer-image"},null,8,["src"])):p("",!0)],2)])}}}),ye=D(ue,[["__scopeId","data-v-35d56870"]]);export{ye as C};
