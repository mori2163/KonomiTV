import{d as V,E as h,q as m,N as W,G as q,s as B,c as r,F as R,w as n,a as l,e as P,k as E,h as N,r as y,b as d,am as U,n as D,O as F,o,R as p,_ as H}from"./index-DJnqFb91.js";import{V as K,_ as M}from"./ssrBoot-DvxYJLiV.js";const T={key:1,class:"search-box"},$={class:"search-box__icon"},z=["placeholder"],A=V({__name:"SPHeaderBar",setup(G){const k=F(),t=W(),v=h(null),s=h(!1),a=h(""),x=m(()=>f(t.path)?"録画番組やシリーズを検索...":"放送予定の番組を検索..."),f=e=>e.startsWith("/videos")||e.startsWith("/mylist")||e.startsWith("/watched-history")||e.startsWith("/offline"),S=()=>f(t.path)?"/videos/search":"/tv/search",_=m(()=>t.path.startsWith("/offline")===!1),g=()=>{_.value!==!1&&(s.value=!0,setTimeout(()=>{var e;(e=v.value)==null||e.focus()},0))},i=()=>{s.value=!1,a.value=""},C=()=>{if(a.value.trim()){const e=S();k.push(`${e}?query=${encodeURIComponent(a.value.trim())}`)}},w=e=>{e.key==="Enter"?C():e.key==="Escape"&&i()};return q(()=>{t.path.endsWith("/search")&&t.query.query&&(a.value=decodeURIComponent(t.query.query),s.value=!0)}),B(()=>t.path,e=>{e.startsWith("/offline")&&s.value===!0&&i()}),(e,c)=>{const b=y("router-link"),u=y("Icon");return o(),r("header",{class:D(["header",{"search-active":s.value}])},[s.value?(o(),r("div",T,[d("div",$,[l(u,{icon:"fluent:search-20-filled",height:"20px"})]),n(d("input",{ref_key:"searchInput",ref:v,type:"search",enterkeyhint:"search",placeholder:x.value,"onUpdate:modelValue":c[0]||(c[0]=I=>a.value=I),onKeydown:w},null,40,z),[[U,a.value]]),n((o(),r("div",{class:"search-box__close",onClick:i},[l(u,{icon:"fluent:dismiss-20-filled",height:"24px"})])),[[p]])])):(o(),r(R,{key:0},[n((o(),E(b,{class:"konomitv-logo",to:"/tv/"},{default:N(()=>[...c[1]||(c[1]=[d("img",{class:"konomitv-logo__image",src:M,height:"21"},null,-1)])]),_:1})),[[p]]),l(K),_.value?n((o(),r("div",{key:0,class:"search-button",onClick:g},[l(u,{icon:"fluent:search-20-filled",height:"24px"})])),[[p]]):P("",!0)],64))],2)}}}),j=H(A,[["__scopeId","data-v-bbe327ae"]]);export{j as S};
