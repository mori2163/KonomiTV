import{q as be,s as ye,x as we,y as De,z as y,A as F,B as ne,C as pe,a as r,D as Ee,E as Z,G as Te,H as ee,I as Ce,J as ie,K as Q,L as ke,N as xe,O as oe,Q as Ve,S as Me,T as Be,W as Ge,X as He,Y as ve,Z as fe,$ as $e,a0 as Ie,a1 as Re,a2 as Le,a3 as Ne,a4 as Oe,a5 as Ye,a6 as ze,a7 as We,a8 as Ae,a9 as Fe,aa as Xe,ab as je,ac as qe,ad as Ue,ae as Ze,af as Je,F as L,ag as Se,d as Ke,ah as Qe,ai as et,c as P,b as u,f as J,g as Y,h as p,aj as R,V as W,t as B,ak as tt,e as A,l as $,k as te,al as ae,o as f,_ as at}from"./index-DccM7iaM.js";import{R as nt}from"./Reservations-C16xPMcX.js";import{H as lt,N as ot}from"./Navigation-DGm0P-Gk.js";import{S as st}from"./SPHeaderBar-OiFAphig.js";import{u as Pe,V as me,m as rt,a as it,b as ut}from"./VOverlay-CwlGJYST.js";import{u as ct,V as dt}from"./ssrBoot-DDUchH-_.js";import{V as vt}from"./VAvatar-Mg7q-7Hx.js";import{f as ft}from"./forwardRefs-B931MWyl.js";import{V as mt,a as gt,b as ge,c as ht,d as _t}from"./VCard-pZt4nG7O.js";import{V as se}from"./VChip-DdklZc6a.js";import{V as bt}from"./VDivider-KkVlXRzP.js";import"./transition-ql8T7V1N.js";import"./index-utDftgVK.js";const yt=ye({id:String,text:String,...Ee(rt({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),wt=be()({name:"VTooltip",props:yt(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:o}=n;const D=we(e,"modelValue"),{scopeId:l}=Pe(),m=De(),i=y(()=>e.id||`v-tooltip-${m}`),E=F(),T=y(()=>e.location.split(" ").length>1?e.location:e.location+" center"),M=y(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),k=y(()=>e.transition?e.transition:D.value?"scale-transition":"fade-transition"),h=y(()=>ne({"aria-describedby":i.value},e.activatorProps));return pe(()=>{const _=me.filterProps(e);return r(me,ne({ref:E,class:["v-tooltip",e.class],style:e.style,id:i.value},_,{modelValue:D.value,"onUpdate:modelValue":b=>D.value=b,transition:k.value,absolute:!0,location:T.value,origin:M.value,persistent:!0,role:"tooltip",activatorProps:h.value,_disableGlobalStack:!0},l),{activator:o.activator,default:function(){var N;for(var b=arguments.length,S=new Array(b),C=0;C<b;C++)S[C]=arguments[C];return((N=o.default)==null?void 0:N.call(o,...S))??e.text}})}),ft({},E)}});let re=class{static async fetchTimetable(n,o){const D=await Z.get("/timetable",{params:{start_time:n.toISOString(),end_time:o.toISOString()}});return D.type==="error"?(Z.showGenericError(D,"番組表の情報を取得できませんでした。"),null):D.data}static async updateEPG(){const n=await Z.post("/timetable/update-epg");return n.type==="error"?(Z.showGenericError(n,"EPG の取得に失敗しました。"),!1):!0}static async reloadEPG(){const n=await Z.post("/timetable/reload-epg");return n.type==="error"?(Z.showGenericError(n,"EPG の再読み込みに失敗しました。"),!1):!0}};const pt=Te("timetable",{state:()=>({_timetable_channels:null,current_date:new Date,selected_channel_type:"ALL",is_loading:!1}),getters:{timetable_channels(e){return e._timetable_channels?e.selected_channel_type==="ALL"?e._timetable_channels:e._timetable_channels.filter(n=>n.channel.type===e.selected_channel_type):null}},actions:{async fetchTimetable(){if(this.is_loading)return;this.is_loading=!0;const e=new Date(this.current_date);e.setHours(4,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);try{const o=await re.fetchTimetable(e,n);this._timetable_channels=o}catch(o){console.error(o),this._timetable_channels=null}finally{this.is_loading=!1}},setPreviousDate(){const e=new Date(this.current_date);e.setDate(e.getDate()-1),this.current_date=e,this.fetchTimetable()},setNextDate(){const e=new Date(this.current_date);e.setDate(e.getDate()+1),this.current_date=e,this.fetchTimetable()},setCurrentDate(){this.current_date=new Date,this.fetchTimetable()},setChannelType(e){this.selected_channel_type=e},async updateEPG(){if(!this.is_loading){this.is_loading=!0;try{if(!await re.updateEPG())throw new Error("EPGの取得に失敗しました。");await this.fetchTimetable()}catch(e){throw console.error("EPG 取得エラー:",e),e}finally{this.is_loading=!1}}},async reloadEPG(){if(!this.is_loading){this.is_loading=!0;try{if(!await re.reloadEPG())throw new Error("EPGの再読み込みに失敗しました。");await this.fetchTimetable()}catch(e){throw console.error("EPG再読み込みエラー:",e),e}finally{this.is_loading=!1}}}}});function kt(e){let{rootEl:n,isSticky:o,layoutItemStyles:D}=e;const l=ee(!1),m=ee(0),i=y(()=>{const M=typeof l.value=="boolean"?"top":l.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,l.value?{[M]:Ce(m.value)}:{top:D.value.top}]});ie(()=>{Q(o,M=>{M?window.addEventListener("scroll",T,{passive:!0}):window.removeEventListener("scroll",T)},{immediate:!0})}),ke(()=>{window.removeEventListener("scroll",T)});let E=0;function T(){const M=E>window.scrollY?"up":"down",k=n.value.getBoundingClientRect(),h=parseFloat(D.value.top??0),_=window.scrollY-Math.max(0,m.value-h),b=k.height+Math.max(m.value,h)-window.scrollY-window.innerHeight,S=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;k.height<window.innerHeight-h?(l.value="top",m.value=h):M==="up"&&l.value==="bottom"||M==="down"&&l.value==="top"?(m.value=window.scrollY+k.top-S,l.value=!0):M==="down"&&b<=0?(m.value=0,l.value="bottom"):M==="up"&&_<=0&&(S?l.value!=="top"&&(m.value=-_+S+h,l.value="top"):(m.value=k.top+_,l.value="top")),E=window.scrollY}return{isStuck:l,stickyStyles:i}}const St=100,Pt=20;function he(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function _e(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let n=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const D=he(n),l=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);n+=(l-D)*Math.abs(l),o===e.length-1&&(n*=.5)}return he(n)*1e3}function Dt(){const e={};function n(l){Array.from(l.changedTouches).forEach(m=>{(e[m.identifier]??(e[m.identifier]=new xe(Pt))).push([l.timeStamp,m])})}function o(l){Array.from(l.changedTouches).forEach(m=>{delete e[m.identifier]})}function D(l){var M;const m=(M=e[l])==null?void 0:M.values().reverse();if(!m)throw new Error(`No samples for touch id ${l}`);const i=m[0],E=[],T=[];for(const k of m){if(i[0]-k[0]>St)break;E.push({t:k[0],d:k[1].clientX}),T.push({t:k[0],d:k[1].clientY})}return{x:_e(E),y:_e(T),get direction(){const{x:k,y:h}=this,[_,b]=[Math.abs(k),Math.abs(h)];return _>b&&k>=0?"right":_>b&&k<=0?"left":b>_&&h>=0?"down":b>_&&h<=0?"up":Et()}}}return{addMovement:n,endTouch:o,getVelocity:D}}function Et(){throw new Error}function Tt(e){let{el:n,isActive:o,isTemporary:D,width:l,touchless:m,position:i}=e;ie(()=>{window.addEventListener("touchstart",z,{passive:!0}),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",x,{passive:!0})}),ke(()=>{window.removeEventListener("touchstart",z),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",x)});const E=y(()=>["left","right"].includes(i.value)),{addMovement:T,endTouch:M,getVelocity:k}=Dt();let h=!1;const _=ee(!1),b=ee(0),S=ee(0);let C;function N(c,d){return(i.value==="left"?c:i.value==="right"?document.documentElement.clientWidth-c:i.value==="top"?c:i.value==="bottom"?document.documentElement.clientHeight-c:K())-(d?l.value:0)}function X(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const v=i.value==="left"?(c-S.value)/l.value:i.value==="right"?(document.documentElement.clientWidth-c-S.value)/l.value:i.value==="top"?(c-S.value)/l.value:i.value==="bottom"?(document.documentElement.clientHeight-c-S.value)/l.value:K();return d?Math.max(0,Math.min(1,v)):v}function z(c){if(m.value)return;const d=c.changedTouches[0].clientX,v=c.changedTouches[0].clientY,g=25,V=i.value==="left"?d<g:i.value==="right"?d>document.documentElement.clientWidth-g:i.value==="top"?v<g:i.value==="bottom"?v>document.documentElement.clientHeight-g:K(),a=o.value&&(i.value==="left"?d<l.value:i.value==="right"?d>document.documentElement.clientWidth-l.value:i.value==="top"?v<l.value:i.value==="bottom"?v>document.documentElement.clientHeight-l.value:K());(V||a||o.value&&D.value)&&(C=[d,v],S.value=N(E.value?d:v,o.value),b.value=X(E.value?d:v),h=S.value>-20&&S.value<80,M(c),T(c))}function I(c){const d=c.changedTouches[0].clientX,v=c.changedTouches[0].clientY;if(h){if(!c.cancelable){h=!1;return}const V=Math.abs(d-C[0]),a=Math.abs(v-C[1]);(E.value?V>a&&V>3:a>V&&a>3)?(_.value=!0,h=!1):(E.value?a:V)>3&&(h=!1)}if(!_.value)return;c.preventDefault(),T(c);const g=X(E.value?d:v,!1);b.value=Math.max(0,Math.min(1,g)),g>1?S.value=N(E.value?d:v,!0):g<0&&(S.value=N(E.value?d:v,!1))}function x(c){if(h=!1,!_.value)return;T(c),_.value=!1;const d=k(c.changedTouches[0].identifier),v=Math.abs(d.x),g=Math.abs(d.y);(E.value?v>g&&v>400:g>v&&g>3)?o.value=d.direction===({left:"right",right:"left",top:"down",bottom:"up"}[i.value]||K()):o.value=b.value>.5}const j=y(()=>_.value?{transform:i.value==="left"?`translateX(calc(-100% + ${b.value*l.value}px))`:i.value==="right"?`translateX(calc(100% - ${b.value*l.value}px))`:i.value==="top"?`translateY(calc(-100% + ${b.value*l.value}px))`:i.value==="bottom"?`translateY(calc(100% - ${b.value*l.value}px))`:K(),transition:"none"}:void 0);return oe(_,()=>{var v,g;const c=((v=n.value)==null?void 0:v.style.transform)??null,d=((g=n.value)==null?void 0:g.style.transition)??null;Ve(()=>{var V,a,t,s;(a=n.value)==null||a.style.setProperty("transform",((V=j.value)==null?void 0:V.transform)||"none"),(s=n.value)==null||s.style.setProperty("transition",((t=j.value)==null?void 0:t.transition)||null)}),Me(()=>{var V,a;(V=n.value)==null||V.style.setProperty("transform",c),(a=n.value)==null||a.style.setProperty("transition",d)})}),{isDragging:_,dragProgress:b,dragStyles:j}}function K(){throw new Error}const Ct=["start","end","left","right","top","bottom"],xt=ye({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Ct.includes(e)},sticky:Boolean,...Ue(),...qe(),...it(),...je({mobile:null}),...Xe(),...Fe(),...Ae(),...We({tag:"nav"}),...ze()},"VNavigationDrawer"),Vt=be()({name:"VNavigationDrawer",props:xt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,n){let{attrs:o,emit:D,slots:l}=n;const{isRtl:m}=Be(),{themeClasses:i}=Ge(e),{borderClasses:E}=He(e),{backgroundColorClasses:T,backgroundColorStyles:M}=ve(fe(e,"color")),{elevationClasses:k}=$e(e),{displayClasses:h,mobile:_}=Ie(e),{roundedClasses:b}=Re(e),S=Le(),C=we(e,"modelValue",null,H=>!!H),{ssrBootStyles:N}=ct(),{scopeId:X}=Pe(),z=F(),I=ee(!1),{runOpenDelay:x,runCloseDelay:j}=ut(e,H=>{I.value=H}),c=y(()=>e.rail&&e.expandOnHover&&I.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),d=y(()=>Ne(e.location,m.value)),v=y(()=>e.persistent),g=y(()=>!e.permanent&&(_.value||e.temporary)),V=y(()=>e.sticky&&!g.value&&d.value!=="bottom");oe(()=>e.expandOnHover&&e.rail!=null,()=>{Q(I,H=>D("update:rail",!H))}),oe(()=>!e.disableResizeWatcher,()=>{Q(g,H=>!e.permanent&&Se(()=>C.value=!H))}),oe(()=>!e.disableRouteWatcher&&!!S,()=>{Q(S.currentRoute,()=>g.value&&(C.value=!1))}),Q(()=>e.permanent,H=>{H&&(C.value=!0)}),e.modelValue==null&&!g.value&&(C.value=e.permanent||!_.value);const{isDragging:a,dragProgress:t}=Tt({el:z,isActive:C,isTemporary:g,width:c,touchless:fe(e,"touchless"),position:d}),s=y(()=>{const H=g.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):c.value;return a.value?H*t.value:H}),{layoutItemStyles:G,layoutItemScrimStyles:w}=Oe({id:e.name,order:y(()=>parseInt(e.order,10)),position:d,layoutSize:s,elementSize:c,active:y(()=>C.value||a.value),disableTransitions:y(()=>a.value),absolute:y(()=>e.absolute||V.value&&typeof O.value!="string")}),{isStuck:O,stickyStyles:q}=kt({rootEl:z,isSticky:V,layoutItemStyles:G}),U=ve(y(()=>typeof e.scrim=="string"?e.scrim:null)),le=y(()=>({...a.value?{opacity:t.value*.2,transition:"none"}:void 0,...w.value}));return Ye({VList:{bgColor:"transparent"}}),pe(()=>{const H=l.image||e.image;return r(L,null,[r(e.tag,ne({ref:z,onMouseenter:x,onMouseleave:j,class:["v-navigation-drawer",`v-navigation-drawer--${d.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":I.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":g.value,"v-navigation-drawer--persistent":v.value,"v-navigation-drawer--active":C.value,"v-navigation-drawer--sticky":V.value},i.value,T.value,E.value,h.value,k.value,b.value,e.class],style:[M.value,G.value,N.value,q.value,e.style]},X,o),{default:()=>{var ue,ce,de;return[H&&r("div",{key:"image",class:"v-navigation-drawer__img"},[l.image?r(Ze,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},l.image):r(vt,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),l.prepend&&r("div",{class:"v-navigation-drawer__prepend"},[(ue=l.prepend)==null?void 0:ue.call(l)]),r("div",{class:"v-navigation-drawer__content"},[(ce=l.default)==null?void 0:ce.call(l)]),l.append&&r("div",{class:"v-navigation-drawer__append"},[(de=l.append)==null?void 0:de.call(l)])]}}),r(Je,{name:"fade-transition"},{default:()=>[g.value&&(a.value||C.value)&&!!e.scrim&&r("div",ne({class:["v-navigation-drawer__scrim",U.backgroundColorClasses.value],style:[le.value,U.backgroundColorStyles.value],onClick:()=>{v.value||(C.value=!1)}},X),null)]})])}),{isStuck:O}}}),Mt={class:"route-container"},Bt={class:"timetable-container-wrapper"},Gt={class:"timetable-header"},Ht={class:"channels-tab"},$t={class:"timetable-header__date-control"},It={class:"mx-4 date-display"},Rt={class:"timetable-body"},Lt={key:0,class:"loading-container"},Nt={key:1,class:"timetable-grid-container"},Ot={class:"timeline-container"},Yt={class:"hour-text"},zt=["onClick"],Wt={class:"program-header"},At={class:"program-title"},Ft={class:"program-badges"},Xt={key:0,class:"program-badge program-badge--paid"},jt={key:1,class:"program-badge program-badge--genre"},qt={key:0,class:"program-description"},Ut={class:"program-time"},Zt={class:"tooltip-text"},Jt={key:2,class:"loading-container"},Kt={class:"epg-controls-floating"},Qt={class:"program-info-badges"},ea={class:"text-body-2 mb-3"},ta={key:0,class:"program-detail-section"},aa={class:"program-detail-grid"},na={class:"detail-key"},la={class:"detail-value"},oa=Ke({__name:"Timetable",setup(e){const n=pt(),o=Qe(),D=[{id:"ALL",name:"すべて"},{id:"GR",name:"地デジ"},{id:"BS",name:"BS"},{id:"CS",name:"CS"}],l=F(0),m=(a,t)=>{n.setChannelType(a),l.value=t},i={"ニュース・報道":{background:"#5a88a7",text:"#ffffff"},スポーツ:{background:"#e07f5a",text:"#ffffff"},"情報・ワイドショー":{background:"#e7a355",text:"#ffffff"},ドラマ:{background:"#b464a8",text:"#ffffff"},音楽:{background:"#64b46e",text:"#ffffff"},バラエティ:{background:"#e05a8e",text:"#ffffff"},映画:{background:"#a7647e",text:"#ffffff"},"アニメ・特撮":{background:"#e76b55",text:"#ffffff"},"ドキュメンタリー・教養":{background:"#5a88a7",text:"#ffffff"},"劇場・公演":{background:"#a7647e",text:"#ffffff"},"趣味・教育":{background:"#64b46e",text:"#ffffff"},福祉:{background:"#5aa788",text:"#ffffff"},その他:{background:"#7f7f7f",text:"#ffffff"}},E={background:"rgb(var(--v-theme-background-lighten-3))",text:"rgb(var(--v-theme-text))"},T=F(new Date),M=setInterval(()=>{T.value=new Date},60*1e3);et(()=>{clearInterval(M)});const k=y(()=>{const a=n.current_date,t=a.getFullYear(),s=a.getMonth()+1,G=a.getDate(),w=["日","月","火","水","木","金","土"][a.getDay()];return`${t}年${s}月${G}日 (${w})`}),h=a=>{const t=new Date(a);return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},_=a=>{const t=new Date(a);return`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()} ${h(a)}`},b=(a,t)=>a.length<=t?a:a.substring(0,t)+"...",S=y(()=>{var a;return{"grid-template-columns":`repeat(${((a=n.timetable_channels)==null?void 0:a.length)||0}, minmax(200px, 1fr))`}}),C=(a,t)=>{var le;const s=new Date(a.start_time),G=(s.getHours()-4+24)%24*60+s.getMinutes(),w=a.duration/60,O=((le=a.genres[0])==null?void 0:le.major)||"その他",q=i[O]||E,U={"grid-column":t+1,"grid-row-start":G+1,"grid-row-end":G+w+1,"background-color":q.background,color:q.text,"border-color":q.background};return new Date(a.end_time)<T.value&&(U.opacity=.6,U["pointer-events"]="none"),U},N=y(()=>{const a=new Date,t=n.current_date;return a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()&&a.getDate()===t.getDate()}),X=y(()=>({top:`${((T.value.getHours()-4+24)%24*60+T.value.getMinutes())*2}px`})),z=a=>a.duration/60>15,I=F(!1),x=F(null),j=a=>{x.value=a,I.value=!0},c=F(!1),d=async a=>{c.value=!0;const t={is_enabled:!0,priority:3,recording_folders:[],recording_start_margin:null,recording_end_margin:null,recording_mode:"SpecifiedService",caption_recording_mode:"Default",data_broadcasting_recording_mode:"Default",post_recording_mode:"Default",post_recording_bat_file_path:null,is_event_relay_follow_enabled:!0,is_exact_recording_enabled:!1,is_oneseg_separate_output_enabled:!1,is_sequential_recording_in_single_file_enabled:!1,forced_tuner_id:null};await nt.addReservation(a,t)?(o.show("success","録画予約を追加しました。"),I.value=!1):o.show("error","録画予約の追加に失敗しました。"),c.value=!1},v=async()=>{try{await n.updateEPG(),o.show("success","EPG 取得を開始しました。")}catch(a){o.show("error","EPG 取得に失敗しました。EDCBが起動していることを確認してください。"),console.error("EPG 取得エラー:",a)}},g=async()=>{try{await n.reloadEPG(),o.show("success","EPG を再読み込みしました。")}catch(a){o.show("error","EPG の再読み込みに失敗しました。EDCBが起動していることを確認してください。"),console.error("EPG再読み込みエラー:",a)}};ie(()=>{n.fetchTimetable()});const V=F(!0);return Q(()=>n.timetable_channels,a=>{V.value&&a&&a.length>0&&Se(()=>{const t=document.querySelector(".timetable-grid-container");if(!t)return;const s=T.value.getHours(),G=T.value.getMinutes(),O=((s-4+24-1)%24*60+G)*2-50;t.scrollTo({top:O>0?O:0,behavior:"smooth"}),V.value=!1})}),(a,t)=>(f(),P("div",Mt,[r(lt),u("main",null,[r(ot),u("div",Bt,[r(st),u("div",Gt,[u("div",Ht,[u("div",{class:"channels-tab__buttons",style:J({"--tab-length":D.length,"--active-tab-index":l.value})},[(f(),P(L,null,Y(D,(s,G)=>r(W,{variant:"flat",class:"channels-tab__button",key:s.id,onClick:w=>m(s.id,G)},{default:p(()=>[$(B(s.name),1)]),_:2},1032,["onClick"])),64)),t[3]||(t[3]=u("div",{class:"channels-tab__highlight"},null,-1))],4)]),u("div",$t,[r(W,{onClick:R(n).setPreviousDate,class:"mr-2"},{default:p(()=>t[4]||(t[4]=[$("前日")])),_:1},8,["onClick"]),u("h2",It,B(k.value),1),r(W,{onClick:R(n).setNextDate,class:"ml-2"},{default:p(()=>t[5]||(t[5]=[$("翌日")])),_:1},8,["onClick"]),r(W,{onClick:R(n).setCurrentDate,class:"ml-4"},{default:p(()=>t[6]||(t[6]=[$("今日")])),_:1},8,["onClick"])])]),u("div",Rt,[R(n).is_loading?(f(),P("div",Lt,[r(tt,{indeterminate:"",size:"64"})])):R(n).timetable_channels&&R(n).timetable_channels.length>0?(f(),P("div",Nt,[t[7]||(t[7]=u("div",{class:"corner-cell"},null,-1)),u("div",{class:"channels-header",style:J(S.value)},[(f(!0),P(L,null,Y(R(n).timetable_channels,s=>(f(),P("div",{key:s.channel.id,class:"channel-header-cell"},B(s.channel.name),1))),128))],4),u("div",Ot,[(f(),P(L,null,Y(25,s=>u("div",{key:s,class:"hour-label"},[u("span",Yt,B((s+3)%24),1)])),64))]),u("div",{class:"programs-grid",style:J(S.value)},[N.value?(f(),P("div",{key:0,class:"current-time-line",style:J(X.value)},null,4)):A("",!0),(f(!0),P(L,null,Y(R(n).timetable_channels.length,s=>(f(),P("div",{key:s,class:"channel-border",style:J({gridColumn:s})},null,4))),128)),(f(),P(L,null,Y(24,s=>u("div",{key:s,class:"hour-border",style:J({gridRow:s*60+1})},null,4)),64)),(f(!0),P(L,null,Y(R(n).timetable_channels,(s,G)=>(f(),P(L,null,[(f(!0),P(L,null,Y(s.programs,w=>(f(),te(wt,{key:w.id,location:"top",disabled:z(w)},{activator:p(({props:O})=>[u("div",ne({ref_for:!0},O,{class:"program-cell elevation-2",style:C(w,G),onClick:q=>j(w)}),[u("div",Wt,[u("div",At,B(w.title),1),u("div",Ft,[w.is_free?A("",!0):(f(),P("span",Xt,"有料")),w.genres.length>0?(f(),P("span",jt,B(w.genres[0].major),1)):A("",!0)])]),w.description&&w.duration>=900?(f(),P("div",qt,B(b(w.description,50)),1)):A("",!0),u("div",Ut,B(h(w.start_time))+" - "+B(h(w.end_time))+" ("+B(Math.floor(w.duration/60))+"分)",1)],16,zt)]),default:p(()=>[u("span",Zt,B(w.title),1)]),_:2},1032,["disabled"]))),128))],64))),256))],4)])):(f(),P("div",Jt,t[8]||(t[8]=[u("p",null,"番組情報を取得できませんでした。",-1),u("p",null,"指定された期間・チャンネルに放送される番組がありません。",-1)])))])])]),u("div",Kt,[r(W,{onClick:v,loading:R(n).is_loading,disabled:R(n).is_loading,color:"primary",variant:"tonal",size:"large",class:"epg-btn"},{default:p(()=>[r(ae,{icon:"mdi-download",class:"mr-1",size:"large"}),t[9]||(t[9]=u("span",null,"EPG取得",-1))]),_:1},8,["loading","disabled"]),r(W,{onClick:g,loading:R(n).is_loading,disabled:R(n).is_loading,color:"secondary",variant:"tonal",size:"large",class:"epg-btn"},{default:p(()=>[r(ae,{icon:"mdi-refresh",class:"mr-1",size:"large"}),t[10]||(t[10]=u("span",null,"EPG再読み込み",-1))]),_:1},8,["loading","disabled"])]),r(Vt,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=s=>I.value=s),location:"right",temporary:"",width:"600"},{default:p(()=>[x.value?(f(),te(_t,{key:0,class:"detail-panel"},{default:p(()=>[r(mt,{class:"text-h5 pb-2"},{default:p(()=>[$(B(x.value.title),1)]),_:1}),r(gt,{class:"pb-3"},{default:p(()=>[$(B(_(x.value.start_time))+" - "+B(_(x.value.end_time))+" ("+B(Math.floor(x.value.duration/60))+"分)",1)]),_:1}),r(ge,{class:"pt-0 pb-2"},{default:p(()=>[u("div",Qt,[x.value.is_free?A("",!0):(f(),te(se,{key:0,color:"warning",size:"small",class:"mr-2 mb-2"},{default:p(()=>[r(ae,{start:""},{default:p(()=>t[11]||(t[11]=[$("mdi-currency-yen")])),_:1}),t[12]||(t[12]=$(" 有料放送 "))]),_:1})),x.value.video_resolution==="1080i"||x.value.video_resolution==="1080p"?(f(),te(se,{key:1,color:"success",size:"small",class:"mr-2 mb-2"},{default:p(()=>[r(ae,{start:""},{default:p(()=>t[13]||(t[13]=[$("mdi-high-definition")])),_:1}),t[14]||(t[14]=$(" HD "))]),_:1})):A("",!0),(f(!0),P(L,null,Y(x.value.genres.slice(0,2),s=>(f(),te(se,{key:s.major,color:"primary",variant:"outlined",size:"small",class:"mr-2 mb-2"},{default:p(()=>[$(B(s.major),1)]),_:2},1024))),128))])]),_:1}),r(ge,{class:"py-2"},{default:p(()=>[r(bt,{class:"mb-3"}),t[16]||(t[16]=u("h4",{class:"text-subtitle-1 mb-2"},"番組内容",-1)),u("p",ea,B(x.value.description),1),x.value.detail&&Object.keys(x.value.detail).length>0?(f(),P("div",ta,[t[15]||(t[15]=u("h4",{class:"text-subtitle-1 mb-2"},"詳細情報",-1)),u("div",aa,[(f(!0),P(L,null,Y(x.value.detail,(s,G)=>(f(),P("div",{key:G,class:"detail-item"},[u("span",na,B(G)+":",1),u("span",la,B(s),1)]))),128))])])):A("",!0)]),_:1}),r(ht,{class:"detail-panel__actions"},{default:p(()=>[r(dt),r(W,{loading:c.value,onClick:t[0]||(t[0]=s=>d(x.value.id)),color:"primary",variant:"elevated"},{default:p(()=>[r(ae,{start:""},{default:p(()=>t[17]||(t[17]=[$("mdi-record-rec")])),_:1}),t[18]||(t[18]=$(" 録画予約 "))]),_:1},8,["loading"]),r(W,{onClick:t[1]||(t[1]=s=>I.value=!1),variant:"outlined"},{default:p(()=>t[19]||(t[19]=[$("閉じる")])),_:1})]),_:1})]),_:1})):A("",!0)]),_:1},8,["modelValue"])]))}}),wa=at(oa,[["__scopeId","data-v-bd773023"]]);export{wa as default};
