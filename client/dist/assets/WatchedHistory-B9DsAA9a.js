import{d as y,u as v,A as r,K as l,J as f,am as w,c as B,a as i,b as d,an as b,o as S,_ as q}from"./index-DccM7iaM.js";import{B as H}from"./Breadcrumbs-CP3OOJIX.js";import{H as M,N as V}from"./Navigation-DGm0P-Gk.js";import{R as I}from"./RecordedProgramList-Bj7ZrL4r.js";import{V as N}from"./Videos-Dl7qIebk.js";import"./ssrBoot-DDUchH-_.js";import"./VDialog-BjY5IdcS.js";import"./VOverlay-CwlGJYST.js";import"./forwardRefs-B931MWyl.js";import"./transition-ql8T7V1N.js";import"./dialog-transition-C3SMWiVY.js";import"./VCard-pZt4nG7O.js";import"./VAvatar-Mg7q-7Hx.js";import"./VSelect-Cp24qR5M.js";import"./VTextField-DXbhksvg.js";import"./index-utDftgVK.js";import"./VDivider-KkVlXRzP.js";import"./VSelectionControl-DNe6cSBY.js";import"./VChip-DdklZc6a.js";import"./VPagination-CZeMQ6PJ.js";const R={class:"route-container"},k={class:"watched-history-container-wrapper"},x={class:"watched-history-container"},E=y({__name:"WatchedHistory",setup(L){const s=w(),g=b(),m=v(),n=r([]),p=r(0),e=r(!0),a=r(1),c=async()=>{const t=m.settings.watched_history.sort((u,_)=>_.updated_at-u.updated_at).map(u=>u.video_id);if(t.length===0){n.value=[],p.value=0,e.value=!1;return}const o=await N.fetchVideos("ids",a.value,t);o&&(n.value=o.recorded_programs,p.value=o.total),e.value=!1},h=async t=>{a.value=t,e.value=!0,await g.replace({query:{...s.query,page:t.toString()}})};return l(()=>s.query,async t=>{t.page&&(a.value=parseInt(t.page)),await c()},{deep:!0}),l(()=>m.settings.watched_history,async()=>{await c()},{deep:!0}),f(async()=>{s.query.page&&(a.value=parseInt(s.query.page)),await c()}),(t,o)=>(S(),B("div",R,[i(M),d("main",null,[i(V),d("div",k,[d("div",x,[i(H,{crumbs:[{name:"ホーム",path:"/"},{name:"視聴履歴",path:"/watched-history/",disabled:!0}]}),i(I,{title:"視聴履歴",programs:n.value,total:p.value,page:a.value,hideSort:!0,isLoading:e.value,showBackButton:!0,showEmptyMessage:!e.value,emptyIcon:"fluent:history-20-regular",emptyMessage:"まだ視聴履歴がありません。",emptySubMessage:"録画番組を30秒以上みると、<br class='d-sm-none'>視聴履歴に追加されます。",forWatchedHistory:!0,"onUpdate:page":h},null,8,["programs","total","page","isLoading","showEmptyMessage"])])])])]))}}),et=q(E,[["__scopeId","data-v-93e97464"]]);export{et as default};
